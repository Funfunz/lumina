---
import {getPageData, getPages} from '../helpers/dataFetcher'
import AstroRenderer from '../components/AstroRenderer.astro'

export async function getStaticPaths() {
  return (await getPages()).map(
		(page) => ({params: {page: page === "homeroot" ? undefined : page}})
	)
}

const { page } = Astro.params;

const pageData = await getPageData(page)
---

<AstroRenderer data={pageData} client:idle/>
