---
import { loadComponent } from '../helpers/componentLib'
import {getPageData, getPages} from '../helpers/dataFetcher'
import Renderer from '../components/Renderer.astro'
import Example from '../components/Example/Example.tsx'
import Grid from '../components/Grid.astro'

loadComponent("text", Example)
loadComponent("grid", Grid)

export async function getStaticPaths() {
  return (await getPages()).map(
		(page) => ({params: {page: page === "homeroot" ? undefined : page}})
	)
}

const { page } = Astro.params;

const pageData = await getPageData(page)
---

<Renderer data={pageData}/>
